{
  "version": 2,
  "name": "kms-main",
  "alias": "kms-main",
  "public": true,
  "builds": [
    {
      "src": "www/package.json",
      "use": "@now/next",
      "config": {
        "useBuildUtils": "@now/build-utils@canary",
        "maxLambdaSize": "50mb"
      }
    },
    {
      "src": "blog/next.config.js", "use": "@now/next"
    },
    { 
      "src": "api/build/index.js", "use": "@now/node-server" 
    },
    {
      "src": "/static/*", "use": "@now/static"
    }
  ],
  "routes": [
    { "src": "/favicon.ico", "dest": "/static/favicon.ico" },
    { "src": "/robots.txt", "dest": "/static/robots.txt" },    
    {
      "src": "/page-2", "dest": "/news/public/page-2/index.html"
    },    
    {
      "src": "/www/_next/(.*)",
      "headers": {"cache-control": "max-age=86400"},
      "dest": "/www/_next/$1"
    },
    {
      "src": "/",
      "headers": {"cache-control": "max-age=600"},
      "dest": "/www/index"
    },
    {
      "src": "/about",
      "headers": {"cache-control": "max-age=600"},
      "dest": "/www/about"
    },
    {
      "src": "/hello-world",
      "headers": {"cache-control": "max-age=600"},
      "dest": "/blog/hello-world"
    },
    {
      "src": "/archives",
      "headers": {"cache-control": "max-age=600"},
      "dest": "/blog/archives"
    },
    { "src": "/api/.*", "dest": "api/build/index.js" }
  ],
  "env": {
    "WWW_PREFIX": "/www"
  }
}
