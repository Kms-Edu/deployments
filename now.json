{
  "version": 2,
  "name": "kms-test",
  "alias": "kms-test",
  "public": true,
  "builds": [
    {
      "src": "www/package.json",
      "use": "@now/next",
      "config": {
        "useBuildUtils": "@now/build-utils@canary",
        "maxLambdaSize": "50mb"
      }
    },
    {
      "src": "blog/next.config.js", "use": "@now/next"
    },   
    { 
      "src": "api/handlers/**/index.js", "use": "@now/node" 
    },
    { 
      "src": "api/handlers/**/index.go", "use": "@now/go" 
    },
    {
      "src": "/static/*", "use": "@now/static"
    }
  ],
  "routes": [
    { "src": "/favicon.ico", "dest": "/static/favicon.ico" },
    { "src": "/robots.txt", "dest": "/static/robots.txt" },    
    {
      "src": "/page-2", "dest": "/news/public/page-2/index.html"
    },    
    {
      "src": "/www/_next/(.*)",
      "headers": {"cache-control": "max-age=86400"},
      "dest": "/www/_next/$1"
    },
    {
      "src": "/",
      "headers": {"cache-control": "max-age=600"},
      "dest": "/www/index"
    },
    {
      "src": "/about",
      "headers": {"cache-control": "max-age=600"},
      "dest": "/www/about"
    },
    {
      "src": "/hello-world",
      "headers": {"cache-control": "max-age=600"},
      "dest": "/blog/hello-world"
    },
    {
      "src": "/archives",
      "headers": {"cache-control": "max-age=600"},
      "dest": "/blog/archives"
    },
    { "src": "/api/pdf", "dest": "/api/handlers/pdf/index.go" },
    { "src": "/api/(.*)", "methods": ["POST"], "dest": "/api/handlers/$1" }
  ],
  "build": {
    "env": {
      "API_HOST": "@api_host",
      "GOOGLE_CLIENT_ID": "@google_client_id"
    }
  },
  "env": {
    "WWW_PREFIX": "/www",
    "API_HOST": "@api_host",
    "JWT_SECRET": "tanphong"
  }
}
